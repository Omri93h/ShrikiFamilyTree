{"mappings":"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","sources":["<anon>","assets/js/form.js"],"sourcesContent":["// Image preview functionality\ndocument.getElementById(\"faceImage\").addEventListener(\"change\", function(event) {\n    var reader = new FileReader();\n    reader.onload = function() {\n        var output = document.getElementById(\"thumbnail\");\n        output.src = reader.result;\n        output.style.display = \"block\";\n    };\n    reader.readAsDataURL(event.target.files[0]);\n});\n// Conditional fields based on blood connection\ndocument.getElementById(\"bloodYes\").addEventListener(\"change\", toggleBloodFields);\ndocument.getElementById(\"bloodNo\").addEventListener(\"change\", toggleBloodFields);\nfunction toggleBloodFields() {\n    var bloodYesFields = document.getElementById(\"bloodYesFields\");\n    var bloodNoFields = document.getElementById(\"bloodNoFields\");\n    var isBloodYes = document.getElementById(\"bloodYes\").checked;\n    if (isBloodYes) {\n        bloodYesFields.style.display = \"block\";\n        bloodNoFields.style.display = \"none\";\n        // Set required attributes\n        document.getElementById(\"motherFirstName\").setAttribute(\"required\", \"required\");\n        document.getElementById(\"fatherFirstName\").setAttribute(\"required\", \"required\");\n        document.getElementById(\"spouseFirstName\").removeAttribute(\"required\");\n        document.getElementById(\"spouseLastName\").removeAttribute(\"required\");\n    } else {\n        bloodYesFields.style.display = \"none\";\n        bloodNoFields.style.display = \"block\";\n        // Set required attributes\n        document.getElementById(\"spouseFirstName\").setAttribute(\"required\", \"required\");\n        document.getElementById(\"spouseLastName\").setAttribute(\"required\", \"required\");\n        document.getElementById(\"motherFirstName\").removeAttribute(\"required\");\n        document.getElementById(\"fatherFirstName\").removeAttribute(\"required\");\n    }\n}\n// Form submission handling\ndocument.getElementById(\"familyForm\").addEventListener(\"submit\", function(e) {\n    e.preventDefault();\n    var form = e.target;\n    var submitButton = form.querySelector('button[type=\"submit\"]');\n    // Disable the submit button and form inputs\n    submitButton.disabled = true;\n    disableFormInputs(form, true);\n    // Show the spinner\n    showSpinner(true);\n    var formData = new FormData(form);\n    // Convert formData to a plain object\n    var data = {};\n    formData.forEach(function(value, key) {\n        data[key] = value;\n    });\n    var fileInput = document.getElementById(\"faceImage\");\n    var file = fileInput.files[0];\n    if (file) {\n        var reader = new FileReader();\n        reader.onloadend = function() {\n            // Remove data URL prefix to get only base64 string\n            var base64String = reader.result.split(\",\")[1];\n            data.faceImage = base64String;\n            data.faceImageContentType = file.type;\n            // Send data via fetch\n            sendData(data, submitButton, form);\n        };\n        reader.readAsDataURL(file);\n    } else {\n        // No image selected\n        data.faceImage = null;\n        data.faceImageContentType = null;\n        // Send data via fetch\n        sendData(data, submitButton, form);\n    }\n});\nfunction sendData(data, submitButton, form) {\n    // Remove any existing error messages\n    var errorDiv = document.getElementById(\"errorDiv\");\n    if (errorDiv) errorDiv.remove();\n    fetch(\"https://script.google.com/macros/s/AKfycby6ARLboANi2OFLmRD6rWc9Q2L7OawUE93-DMEw8Zt8Nsw2bxO612QOGmQ-n2SxYd7HWQ/exec\", {\n        redirect: \"follow\",\n        method: \"POST\",\n        body: JSON.stringify(data),\n        headers: {\n            \"Content-Type\": \"text/plain;charset=utf-8\"\n        }\n    }).then((response)=>response.json()).then((result)=>{\n        // Hide the spinner\n        showSpinner(false);\n        if (result.status === \"success\") // Redirect to the success page\n        window.location.href = \"success.html\";\n        else {\n            // Enable the submit button and form inputs\n            submitButton.disabled = false;\n            disableFormInputs(form, false);\n            // Display error message\n            showError(\"\\u05D4\\u05D9\\u05D9\\u05EA\\u05D4 \\u05D1\\u05E2\\u05D9\\u05D4 \\u05D1\\u05E9\\u05DC\\u05D9\\u05D7\\u05EA \\u05D4\\u05E4\\u05E8\\u05D8\\u05D9\\u05DD\");\n        }\n    }).catch((error)=>{\n        console.error(\"Error:\", error);\n        // Hide the spinner\n        showSpinner(false);\n        // Enable the submit button and form inputs\n        submitButton.disabled = false;\n        disableFormInputs(form, false);\n        // Display error message\n        showError(\"\\u05D4\\u05D9\\u05D9\\u05EA\\u05D4 \\u05D1\\u05E2\\u05D9\\u05D4 \\u05D1\\u05E9\\u05DC\\u05D9\\u05D7\\u05EA \\u05D4\\u05E4\\u05E8\\u05D8\\u05D9\\u05DD\");\n    });\n}\nfunction showError(message) {\n    var form = document.getElementById(\"familyForm\");\n    var errorDiv = document.createElement(\"div\");\n    errorDiv.id = \"errorDiv\";\n    errorDiv.className = \"alert alert-danger text-center\";\n    errorDiv.innerText = message;\n    // Insert the error message above the submit button\n    var submitButton = form.querySelector('button[type=\"submit\"]');\n    form.insertBefore(errorDiv, submitButton);\n}\nfunction showSpinner(show) {\n    var spinner = document.getElementById(\"spinner\");\n    if (show) spinner.style.display = \"block\";\n    else spinner.style.display = \"none\";\n}\nfunction disableFormInputs(form, disable) {\n    var inputs = form.querySelectorAll(\"input, select, textarea, button\");\n    inputs.forEach(function(input) {\n        input.disabled = disable;\n    });\n}\n\n//# sourceMappingURL=form.7dd717de.js.map\n","// Image preview functionality\ndocument.getElementById('faceImage').addEventListener('change', function(event) {\n\tvar reader = new FileReader();\n\treader.onload = function(){\n\t  var output = document.getElementById('thumbnail');\n\t  output.src = reader.result;\n\t  output.style.display = 'block';\n\t};\n\treader.readAsDataURL(event.target.files[0]);\n  });\n  \n  // Conditional fields based on blood connection\n  document.getElementById('bloodYes').addEventListener('change', toggleBloodFields);\n  document.getElementById('bloodNo').addEventListener('change', toggleBloodFields);\n  \n  function toggleBloodFields() {\n\tvar bloodYesFields = document.getElementById('bloodYesFields');\n\tvar bloodNoFields = document.getElementById('bloodNoFields');\n\tvar isBloodYes = document.getElementById('bloodYes').checked;\n  \n\tif (isBloodYes) {\n\t  bloodYesFields.style.display = 'block';\n\t  bloodNoFields.style.display = 'none';\n\t  // Set required attributes\n\t  document.getElementById('motherFirstName').setAttribute('required', 'required');\n\t  document.getElementById('fatherFirstName').setAttribute('required', 'required');\n\t  document.getElementById('spouseFirstName').removeAttribute('required');\n\t  document.getElementById('spouseLastName').removeAttribute('required');\n\t} else {\n\t  bloodYesFields.style.display = 'none';\n\t  bloodNoFields.style.display = 'block';\n\t  // Set required attributes\n\t  document.getElementById('spouseFirstName').setAttribute('required', 'required');\n\t  document.getElementById('spouseLastName').setAttribute('required', 'required');\n\t  document.getElementById('motherFirstName').removeAttribute('required');\n\t  document.getElementById('fatherFirstName').removeAttribute('required');\n\t}\n  }\n  \n\n\n// Form submission handling\ndocument.getElementById('familyForm').addEventListener('submit', function(e) {\n\te.preventDefault();\n  \n\tvar form = e.target;\n\tvar submitButton = form.querySelector('button[type=\"submit\"]');\n  \n\t// Disable the submit button and form inputs\n\tsubmitButton.disabled = true;\n\tdisableFormInputs(form, true);\n  \n\t// Show the spinner\n\tshowSpinner(true);\n  \n\tvar formData = new FormData(form);\n  \n\t// Convert formData to a plain object\n\tvar data = {};\n\tformData.forEach(function(value, key) {\n\t  data[key] = value;\n\t});\n  \n\tvar fileInput = document.getElementById('faceImage');\n\tvar file = fileInput.files[0];\n  \n\tif (file) {\n\t  var reader = new FileReader();\n\t  reader.onloadend = function() {\n\t\t// Remove data URL prefix to get only base64 string\n\t\tvar base64String = reader.result.split(',')[1];\n\t\tdata.faceImage = base64String;\n\t\tdata.faceImageContentType = file.type;\n  \n\t\t// Send data via fetch\n\t\tsendData(data, submitButton, form);\n\t  };\n\t  reader.readAsDataURL(file);\n\t} else {\n\t  // No image selected\n\t  data.faceImage = null;\n\t  data.faceImageContentType = null;\n\t  // Send data via fetch\n\t  sendData(data, submitButton, form);\n\t}\n  });\n  \n  function sendData(data, submitButton, form) {\n\t// Remove any existing error messages\n\tvar errorDiv = document.getElementById('errorDiv');\n\tif (errorDiv) {\n\t  errorDiv.remove();\n\t}\n  \n\tfetch('https://script.google.com/macros/s/AKfycby6ARLboANi2OFLmRD6rWc9Q2L7OawUE93-DMEw8Zt8Nsw2bxO612QOGmQ-n2SxYd7HWQ/exec', {\n\t  redirect: \"follow\",\n\t  method: 'POST',\n\t  body: JSON.stringify(data),\n\t  headers: {\n\t\t\"Content-Type\": \"text/plain;charset=utf-8\",\n\t  },\n\t})\n\t.then(response => response.json())\n\t.then(result => {\n\t  // Hide the spinner\n\t  showSpinner(false);\n  \n\t  if (result.status === 'success') {\n\t\t// Redirect to the success page\n\t\twindow.location.href = 'success.html';\n\t  } else {\n\t\t// Enable the submit button and form inputs\n\t\tsubmitButton.disabled = false;\n\t\tdisableFormInputs(form, false);\n\t\t// Display error message\n\t\tshowError('הייתה בעיה בשליחת הפרטים');\n\t  }\n\t})\n\t.catch(error => {\n\t  console.error('Error:', error);\n\t  // Hide the spinner\n\t  showSpinner(false);\n\t  // Enable the submit button and form inputs\n\t  submitButton.disabled = false;\n\t  disableFormInputs(form, false);\n\t  // Display error message\n\t  showError('הייתה בעיה בשליחת הפרטים');\n\t});\n  }\n  \n  function showError(message) {\n\tvar form = document.getElementById('familyForm');\n\tvar errorDiv = document.createElement('div');\n\terrorDiv.id = 'errorDiv';\n\terrorDiv.className = 'alert alert-danger text-center';\n\terrorDiv.innerText = message;\n\t// Insert the error message above the submit button\n\tvar submitButton = form.querySelector('button[type=\"submit\"]');\n\tform.insertBefore(errorDiv, submitButton);\n  }\n  \n  function showSpinner(show) {\n\tvar spinner = document.getElementById('spinner');\n\tif (show) {\n\t  spinner.style.display = 'block';\n\t} else {\n\t  spinner.style.display = 'none';\n\t}\n  }\n  \n  function disableFormInputs(form, disable) {\n\tvar inputs = form.querySelectorAll('input, select, textarea, button');\n\tinputs.forEach(function(input) {\n\t  input.disabled = disable;\n\t});\n  }\n  "],"names":["toggleBloodFields","bloodYesFields","document","getElementById","bloodNoFields","checked","style","display","setAttribute","removeAttribute","sendData","data","submitButton","form","errorDiv","remove","fetch","redirect","method","body","JSON","stringify","headers","then","response","json","result","showSpinner","status","window","location","href","disabled","disableFormInputs","showError","catch","error","console","message","createElement","id","className","innerText","querySelector","insertBefore","show","spinner","disable","inputs","querySelectorAll","forEach","input","addEventListener","event","reader","FileReader","onload","output","src","readAsDataURL","target","files","e","preventDefault","formData","FormData","value","key","file","fileInput","onloadend","base64String","split","faceImage","faceImageContentType","type"],"version":3,"file":"form.7dd717de.js.map"}