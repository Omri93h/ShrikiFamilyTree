{"mappings":"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","sources":["<anon>","assets/js/form.js"],"sourcesContent":["GOOGLE_SCRIPT_URL = \"https://script.google.com/macros/s/AKfycbxn2onZqiyTpulQTJsjSWgXDTJYN0bd9vKz4vjiiyMqKWlzRwCgggrM2dC1RZ_miroZBQ/exec\";\n// Global variable to store fetched people data\nvar peopleData = [];\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n    fetch(GOOGLE_SCRIPT_URL).then((response)=>response.json()).then((data)=>{\n        console.log(\"Fetched Data:\", data);\n        // Store the fetched data\n        peopleData = data;\n        // Populate the spouse, mother, and father dropdowns\n        populateSpouseDropdown(peopleData);\n        populateMotherDropdown(peopleData);\n        populateFatherDropdown(peopleData);\n    }).catch((error)=>{\n        console.error(\"Error fetching data:\", error);\n    });\n});\nfunction populateSpouseDropdown(people) {\n    var spouseSelect = document.getElementById(\"spouseSelect\");\n    // Clear existing options except the first one\n    spouseSelect.options.length = 1;\n    people.forEach(function(person, index) {\n        var option = document.createElement(\"option\");\n        option.value = index; // Use the index as the value\n        option.text = `${person.firstName} ${person.lastName}`;\n        spouseSelect.add(option);\n    });\n}\nfunction populateMotherDropdown(people) {\n    var motherSelect = document.getElementById(\"motherSelect\");\n    // Clear existing options except the first one\n    motherSelect.options.length = 1;\n    people.forEach(function(person, index) {\n        var option = document.createElement(\"option\");\n        option.value = index; // Use the index as the value\n        option.text = `${person.firstName} ${person.lastName}`;\n        motherSelect.add(option);\n    });\n}\nfunction populateFatherDropdown(people) {\n    var fatherSelect = document.getElementById(\"fatherSelect\");\n    // Clear existing options except the first one\n    fatherSelect.options.length = 1;\n    people.forEach(function(person, index) {\n        var option = document.createElement(\"option\");\n        option.value = index; // Use the index as the value\n        option.text = `${person.firstName} ${person.lastName}`;\n        fatherSelect.add(option);\n    });\n}\n// Image preview functionality\ndocument.getElementById(\"faceImage\").addEventListener(\"change\", function(event) {\n    var reader = new FileReader();\n    reader.onload = function() {\n        var output = document.getElementById(\"thumbnail\");\n        output.src = reader.result;\n        output.style.display = \"block\";\n    };\n    reader.readAsDataURL(event.target.files[0]);\n});\n// Conditional fields based on blood connection\ndocument.getElementById(\"bloodYes\").addEventListener(\"change\", toggleBloodFields);\ndocument.getElementById(\"bloodNo\").addEventListener(\"change\", toggleBloodFields);\nfunction toggleBloodFields() {\n    var bloodYesFields = document.getElementById(\"bloodYesFields\");\n    var bloodNoFields = document.getElementById(\"bloodNoFields\");\n    var isBloodYes = document.getElementById(\"bloodYes\").checked;\n    if (isBloodYes) {\n        bloodYesFields.style.display = \"block\";\n        bloodNoFields.style.display = \"none\";\n        // Set required attributes\n        document.getElementById(\"motherSelect\").setAttribute(\"required\", \"required\");\n        document.getElementById(\"fatherSelect\").setAttribute(\"required\", \"required\");\n        document.getElementById(\"spouseSelect\").removeAttribute(\"required\");\n    } else {\n        bloodYesFields.style.display = \"none\";\n        bloodNoFields.style.display = \"block\";\n        // Set required attributes\n        document.getElementById(\"spouseSelect\").setAttribute(\"required\", \"required\");\n        document.getElementById(\"motherSelect\").removeAttribute(\"required\");\n        document.getElementById(\"fatherSelect\").removeAttribute(\"required\");\n    }\n}\n// Form submission handling\ndocument.getElementById(\"familyForm\").addEventListener(\"submit\", function(e) {\n    e.preventDefault();\n    var form = e.target;\n    // Collect data before disabling inputs\n    var formData = new FormData(form);\n    // Convert formData to a plain object\n    var data = {};\n    formData.forEach(function(value, key) {\n        data[key] = value;\n    });\n    // Map bloodConnection value from English to Hebrew\n    if (data.bloodConnection === \"Yes\") data.bloodConnection = \"\\u05DB\\u05DF\";\n    else if (data.bloodConnection === \"No\") data.bloodConnection = \"\\u05DC\\u05D0\";\n    // If bloodConnection is 'לא' (No), handle spouse selection\n    if (data.bloodConnection === \"\\u05DC\\u05D0\" && data.spouseSelect) {\n        var spouseIndex = data.spouseSelect;\n        var spousePerson = peopleData[spouseIndex];\n        if (spousePerson) {\n            data.spouseFirstName = spousePerson.firstName;\n            data.spouseLastName = spousePerson.lastName;\n        } else {\n            data.spouseFirstName = \"\";\n            data.spouseLastName = \"\";\n        }\n    }\n    // Remove spouseSelect from data since we now have spouseFirstName and spouseLastName\n    delete data.spouseSelect;\n    // If bloodConnection is 'כן' (Yes), handle mother and father selection\n    if (data.bloodConnection === \"\\u05DB\\u05DF\") {\n        // Mother\n        if (data.motherSelect) {\n            var motherIndex = data.motherSelect;\n            var motherPerson = peopleData[motherIndex];\n            if (motherPerson) data.motherFirstName = motherPerson.firstName;\n            else data.motherFirstName = \"\";\n        }\n        // Father\n        if (data.fatherSelect) {\n            var fatherIndex = data.fatherSelect;\n            var fatherPerson = peopleData[fatherIndex];\n            if (fatherPerson) data.fatherFirstName = fatherPerson.firstName;\n            else data.fatherFirstName = \"\";\n        }\n    }\n    // Remove motherSelect and fatherSelect from data since we now have motherFirstName and fatherFirstName\n    delete data.motherSelect;\n    delete data.fatherSelect;\n    // Existing code to handle image and send data...\n    var fileInput = document.getElementById(\"faceImage\");\n    var file = fileInput.files[0];\n    if (file) {\n        var reader = new FileReader();\n        reader.onloadend = function() {\n            // Remove data URL prefix to get only base64 string\n            var base64String = reader.result.split(\",\")[1];\n            data.faceImage = base64String;\n            data.faceImageContentType = file.type;\n            // Send data via fetch\n            sendData(data, form);\n        };\n        reader.readAsDataURL(file);\n    } else {\n        // No image selected\n        data.faceImage = null;\n        data.faceImageContentType = null;\n        // Send data via fetch\n        sendData(data, form);\n    }\n});\nfunction sendData(data, form) {\n    var submitButton = form.querySelector('button[type=\"submit\"]');\n    // Disable the submit button and form inputs\n    submitButton.disabled = true;\n    disableFormInputs(form, true);\n    // Show the spinner\n    showSpinner(true);\n    fetch(GOOGLE_SCRIPT_URL, {\n        redirect: \"follow\",\n        method: \"POST\",\n        body: JSON.stringify(data),\n        headers: {\n            \"Content-Type\": \"text/plain;charset=utf-8\"\n        }\n    }).then((response)=>response.json()).then((result)=>{\n        // Hide the spinner\n        showSpinner(false);\n        if (result.status === \"success\") // Redirect to the success page\n        window.location.href = \"success.html\";\n        else {\n            // Enable the submit button and form inputs\n            submitButton.disabled = false;\n            disableFormInputs(form, false);\n            showError(\"\\u05E9\\u05D2\\u05D9\\u05D0\\u05D4: \" + result.message);\n        }\n    }).catch((error)=>{\n        console.error(\"Error:\", error);\n        // Hide the spinner\n        showSpinner(false);\n        // Enable the submit button and form inputs\n        submitButton.disabled = false;\n        disableFormInputs(form, false);\n        showError(\"\\u05D0\\u05D9\\u05E8\\u05E2\\u05D4 \\u05E9\\u05D2\\u05D9\\u05D0\\u05D4 \\u05D1\\u05E9\\u05DC\\u05D9\\u05D7\\u05EA \\u05D4\\u05E0\\u05EA\\u05D5\\u05E0\\u05D9\\u05DD.\");\n    });\n}\nfunction showError(message) {\n    var form = document.getElementById(\"familyForm\");\n    var errorDiv = document.getElementById(\"errorDiv\");\n    if (!errorDiv) {\n        errorDiv = document.createElement(\"div\");\n        errorDiv.id = \"errorDiv\";\n        errorDiv.className = \"alert alert-danger text-center\";\n        form.insertBefore(errorDiv, form.firstChild);\n    }\n    errorDiv.innerText = message;\n}\nfunction showSpinner(show) {\n    var spinner = document.getElementById(\"spinner\");\n    if (show) spinner.style.display = \"block\";\n    else spinner.style.display = \"none\";\n}\nfunction disableFormInputs(form, disable) {\n    var inputs = form.querySelectorAll(\"input, select, textarea, button\");\n    inputs.forEach(function(input) {\n        input.disabled = disable;\n    });\n}\n\n//# sourceMappingURL=form.9f1f9667.js.map\n","GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxn2onZqiyTpulQTJsjSWgXDTJYN0bd9vKz4vjiiyMqKWlzRwCgggrM2dC1RZ_miroZBQ/exec'\n// Global variable to store fetched people data\nvar peopleData = [];\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  fetch(GOOGLE_SCRIPT_URL)\n    .then(response => response.json())\n    .then(data => {\n      console.log('Fetched Data:', data);\n      // Store the fetched data\n      peopleData = data;\n      // Populate the spouse, mother, and father dropdowns\n      populateSpouseDropdown(peopleData);\n      populateMotherDropdown(peopleData);\n      populateFatherDropdown(peopleData);\n    })\n    .catch(error => {\n      console.error('Error fetching data:', error);\n    });\n});\n\nfunction populateSpouseDropdown(people) {\n  var spouseSelect = document.getElementById('spouseSelect');\n\n  // Clear existing options except the first one\n  spouseSelect.options.length = 1;\n\n  people.forEach(function (person, index) {\n    var option = document.createElement('option');\n    option.value = index; // Use the index as the value\n    option.text = `${person.firstName} ${person.lastName}`;\n    spouseSelect.add(option);\n  });\n}\n\nfunction populateMotherDropdown(people) {\n  var motherSelect = document.getElementById('motherSelect');\n\n  // Clear existing options except the first one\n  motherSelect.options.length = 1;\n\n  people.forEach(function (person, index) {\n    var option = document.createElement('option');\n    option.value = index; // Use the index as the value\n    option.text = `${person.firstName} ${person.lastName}`;\n    motherSelect.add(option);\n  });\n}\n\nfunction populateFatherDropdown(people) {\n  var fatherSelect = document.getElementById('fatherSelect');\n\n  // Clear existing options except the first one\n  fatherSelect.options.length = 1;\n\n  people.forEach(function (person, index) {\n    var option = document.createElement('option');\n    option.value = index; // Use the index as the value\n    option.text = `${person.firstName} ${person.lastName}`;\n    fatherSelect.add(option);\n  });\n}\n\n// Image preview functionality\ndocument.getElementById('faceImage').addEventListener('change', function (event) {\n  var reader = new FileReader();\n  reader.onload = function () {\n    var output = document.getElementById('thumbnail');\n    output.src = reader.result;\n    output.style.display = 'block';\n  };\n  reader.readAsDataURL(event.target.files[0]);\n});\n\n// Conditional fields based on blood connection\ndocument.getElementById('bloodYes').addEventListener('change', toggleBloodFields);\ndocument.getElementById('bloodNo').addEventListener('change', toggleBloodFields);\n\nfunction toggleBloodFields() {\n  var bloodYesFields = document.getElementById('bloodYesFields');\n  var bloodNoFields = document.getElementById('bloodNoFields');\n  var isBloodYes = document.getElementById('bloodYes').checked;\n\n  if (isBloodYes) {\n    bloodYesFields.style.display = 'block';\n    bloodNoFields.style.display = 'none';\n    // Set required attributes\n    document.getElementById('motherSelect').setAttribute('required', 'required');\n    document.getElementById('fatherSelect').setAttribute('required', 'required');\n    document.getElementById('spouseSelect').removeAttribute('required');\n  } else {\n    bloodYesFields.style.display = 'none';\n    bloodNoFields.style.display = 'block';\n    // Set required attributes\n    document.getElementById('spouseSelect').setAttribute('required', 'required');\n    document.getElementById('motherSelect').removeAttribute('required');\n    document.getElementById('fatherSelect').removeAttribute('required');\n  }\n}\n\n// Form submission handling\ndocument.getElementById('familyForm').addEventListener('submit', function (e) {\n  e.preventDefault();\n\n  var form = e.target;\n\n  // Collect data before disabling inputs\n  var formData = new FormData(form);\n\n  // Convert formData to a plain object\n  var data = {};\n  formData.forEach(function (value, key) {\n    data[key] = value;\n  });\n\n  // Map bloodConnection value from English to Hebrew\n  if (data.bloodConnection === 'Yes') {\n    data.bloodConnection = 'כן';\n  } else if (data.bloodConnection === 'No') {\n    data.bloodConnection = 'לא';\n  }\n\n  // If bloodConnection is 'לא' (No), handle spouse selection\n  if (data.bloodConnection === 'לא' && data.spouseSelect) {\n    var spouseIndex = data.spouseSelect;\n    var spousePerson = peopleData[spouseIndex];\n\n    if (spousePerson) {\n      data.spouseFirstName = spousePerson.firstName;\n      data.spouseLastName = spousePerson.lastName;\n    } else {\n      data.spouseFirstName = '';\n      data.spouseLastName = '';\n    }\n  }\n\n  // Remove spouseSelect from data since we now have spouseFirstName and spouseLastName\n  delete data.spouseSelect;\n\n  // If bloodConnection is 'כן' (Yes), handle mother and father selection\n  if (data.bloodConnection === 'כן') {\n    // Mother\n    if (data.motherSelect) {\n      var motherIndex = data.motherSelect;\n      var motherPerson = peopleData[motherIndex];\n\n      if (motherPerson) {\n        data.motherFirstName = motherPerson.firstName;\n      } else {\n        data.motherFirstName = '';\n      }\n    }\n\n    // Father\n    if (data.fatherSelect) {\n      var fatherIndex = data.fatherSelect;\n      var fatherPerson = peopleData[fatherIndex];\n\n      if (fatherPerson) {\n        data.fatherFirstName = fatherPerson.firstName;\n      } else {\n        data.fatherFirstName = '';\n      }\n    }\n  }\n\n  // Remove motherSelect and fatherSelect from data since we now have motherFirstName and fatherFirstName\n  delete data.motherSelect;\n  delete data.fatherSelect;\n\n  // Existing code to handle image and send data...\n\n  var fileInput = document.getElementById('faceImage');\n  var file = fileInput.files[0];\n\n  if (file) {\n    var reader = new FileReader();\n    reader.onloadend = function () {\n      // Remove data URL prefix to get only base64 string\n      var base64String = reader.result.split(',')[1];\n      data.faceImage = base64String;\n      data.faceImageContentType = file.type;\n\n      // Send data via fetch\n      sendData(data, form);\n    };\n    reader.readAsDataURL(file);\n  } else {\n    // No image selected\n    data.faceImage = null;\n    data.faceImageContentType = null;\n\n    // Send data via fetch\n    sendData(data, form);\n  }\n});\n\nfunction sendData(data, form) {\n  var submitButton = form.querySelector('button[type=\"submit\"]');\n\n  // Disable the submit button and form inputs\n  submitButton.disabled = true;\n  disableFormInputs(form, true);\n\n  // Show the spinner\n  showSpinner(true);\n\n  fetch(GOOGLE_SCRIPT_URL, {\n    redirect: \"follow\",\n    method: 'POST',\n    body: JSON.stringify(data),\n    headers: {\n      \"Content-Type\": \"text/plain;charset=utf-8\",\n    },\n  })\n    .then(response => response.json())\n    .then(result => {\n      // Hide the spinner\n      showSpinner(false);\n\n      if (result.status === 'success') {\n        // Redirect to the success page\n        window.location.href = 'success.html';\n      } else {\n        // Enable the submit button and form inputs\n        submitButton.disabled = false;\n        disableFormInputs(form, false);\n        showError('שגיאה: ' + result.message);\n      }\n    })\n    .catch(error => {\n      console.error('Error:', error);\n      // Hide the spinner\n      showSpinner(false);\n      // Enable the submit button and form inputs\n      submitButton.disabled = false;\n      disableFormInputs(form, false);\n      showError('אירעה שגיאה בשליחת הנתונים.');\n    });\n}\n\nfunction showError(message) {\n  var form = document.getElementById('familyForm');\n  var errorDiv = document.getElementById('errorDiv');\n  if (!errorDiv) {\n    errorDiv = document.createElement('div');\n    errorDiv.id = 'errorDiv';\n    errorDiv.className = 'alert alert-danger text-center';\n    form.insertBefore(errorDiv, form.firstChild);\n  }\n  errorDiv.innerText = message;\n}\n\nfunction showSpinner(show) {\n  var spinner = document.getElementById('spinner');\n  if (show) {\n    spinner.style.display = 'block';\n  } else {\n    spinner.style.display = 'none';\n  }\n}\n\nfunction disableFormInputs(form, disable) {\n  var inputs = form.querySelectorAll('input, select, textarea, button');\n  inputs.forEach(function (input) {\n    input.disabled = disable;\n  });\n}\n"],"names":["GOOGLE_SCRIPT_URL","peopleData","toggleBloodFields","bloodYesFields","document","getElementById","bloodNoFields","checked","style","display","setAttribute","removeAttribute","sendData","data","form","submitButton","querySelector","disabled","disableFormInputs","showSpinner","fetch","redirect","method","body","JSON","stringify","headers","then","response","json","result","status","window","location","href","showError","message","catch","error","console","errorDiv","createElement","id","className","insertBefore","firstChild","innerText","show","spinner","disable","inputs","querySelectorAll","forEach","input","addEventListener","people","spouseSelect","motherSelect","fatherSelect","log","options","length","person","index","option","value","text","firstName","lastName","add","event","reader","FileReader","onload","output","src","readAsDataURL","target","files","e","preventDefault","formData","FormData","key","bloodConnection","spousePerson","spouseFirstName","spouseLastName","motherPerson","motherFirstName","fatherPerson","fatherFirstName","file","fileInput","onloadend","base64String","split","faceImage","faceImageContentType","type"],"version":3,"file":"form.9f1f9667.js.map"}