{"mappings":"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","sources":["assets/js/form.js"],"sourcesContent":["GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxn2onZqiyTpulQTJsjSWgXDTJYN0bd9vKz4vjiiyMqKWlzRwCgggrM2dC1RZ_miroZBQ/exec'\n\ndocument.addEventListener('DOMContentLoaded', function () {\n\tfetch(GOOGLE_SCRIPT_URL)\n\t\t.then(response => response.json())\n\t\t.then(data => {\n\t\t\tconsole.log('Fetched Data:', data);\n\t\t\t// You can perform additional operations with the data here\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error('Error fetching data:', error);\n\t\t});\n});\n\n// Image preview functionality\ndocument.getElementById('faceImage').addEventListener('change', function(event) {\n  var reader = new FileReader();\n  reader.onload = function(){\n    var output = document.getElementById('thumbnail');\n    output.src = reader.result;\n    output.style.display = 'block';\n  };\n  reader.readAsDataURL(event.target.files[0]);\n});\n\n// Conditional fields based on blood connection\ndocument.getElementById('bloodYes').addEventListener('change', toggleBloodFields);\ndocument.getElementById('bloodNo').addEventListener('change', toggleBloodFields);\n\nfunction toggleBloodFields() {\n  var bloodYesFields = document.getElementById('bloodYesFields');\n  var bloodNoFields = document.getElementById('bloodNoFields');\n  var isBloodYes = document.getElementById('bloodYes').checked;\n\n  if (isBloodYes) {\n    bloodYesFields.style.display = 'block';\n    bloodNoFields.style.display = 'none';\n    // Set required attributes\n    document.getElementById('motherFirstName').setAttribute('required', 'required');\n    document.getElementById('fatherFirstName').setAttribute('required', 'required');\n    document.getElementById('spouseFirstName').removeAttribute('required');\n    document.getElementById('spouseLastName').removeAttribute('required');\n  } else {\n    bloodYesFields.style.display = 'none';\n    bloodNoFields.style.display = 'block';\n    // Set required attributes\n    document.getElementById('spouseFirstName').setAttribute('required', 'required');\n    document.getElementById('spouseLastName').setAttribute('required', 'required');\n    document.getElementById('motherFirstName').removeAttribute('required');\n    document.getElementById('fatherFirstName').removeAttribute('required');\n  }\n}\n\n// Form submission handling\ndocument.getElementById('familyForm').addEventListener('submit', function(e) {\n  e.preventDefault();\n\n  var form = e.target;\n\n  // Collect data before disabling inputs\n  var formData = new FormData(form);\n\n  // Convert formData to a plain object\n  var data = {};\n  formData.forEach(function(value, key) {\n    data[key] = value;\n  });\n\n  // Map bloodConnection value from English to Hebrew\n  if (data.bloodConnection === 'Yes') {\n    data.bloodConnection = 'כן';\n  } else if (data.bloodConnection === 'No') {\n    data.bloodConnection = 'לא';\n  }\n\n  var fileInput = document.getElementById('faceImage');\n  var file = fileInput.files[0];\n\n  if (file) {\n    var reader = new FileReader();\n    reader.onloadend = function() {\n      // Remove data URL prefix to get only base64 string\n      var base64String = reader.result.split(',')[1];\n      data.faceImage = base64String;\n      data.faceImageContentType = file.type;\n\n      // Send data via fetch\n      sendData(data, form);\n    };\n    reader.readAsDataURL(file);\n  } else {\n    // No image selected\n    data.faceImage = null;\n    data.faceImageContentType = null;\n\n    // Send data via fetch\n    sendData(data, form);\n  }\n});\n\nfunction sendData(data, form) {\n  var submitButton = form.querySelector('button[type=\"submit\"]');\n\n  // Disable the submit button and form inputs\n  submitButton.disabled = true;\n  disableFormInputs(form, true);\n\n  // Show the spinner\n  showSpinner(true);\n\n  fetch(GOOGLE_SCRIPT_URL, {\n    redirect: \"follow\",\n    method: 'POST',\n    body: JSON.stringify(data),\n    headers: {\n      \"Content-Type\": \"text/plain;charset=utf-8\",\n    },\n  })\n  .then(response => response.json())\n  .then(result => {\n    // Hide the spinner\n    showSpinner(false);\n\n    if (result.status === 'success') {\n      // Redirect to the success page\n      window.location.href = 'success.html';\n    } else {\n      // Enable the submit button and form inputs\n      submitButton.disabled = false;\n      disableFormInputs(form, false);\n      showError('שגיאה: ' + result.message);\n    }\n  })\n  .catch(error => {\n    console.error('Error:', error);\n    // Hide the spinner\n    showSpinner(false);\n    // Enable the submit button and form inputs\n    submitButton.disabled = false;\n    disableFormInputs(form, false);\n    showError('אירעה שגיאה בשליחת הנתונים.');\n  });\n}\n\nfunction showError(message) {\n  var form = document.getElementById('familyForm');\n  var errorDiv = document.getElementById('errorDiv');\n  if (!errorDiv) {\n    errorDiv = document.createElement('div');\n    errorDiv.id = 'errorDiv';\n    errorDiv.className = 'alert alert-danger text-center';\n    form.insertBefore(errorDiv, form.firstChild);\n  }\n  errorDiv.innerText = message;\n}\n\nfunction showSpinner(show) {\n  var spinner = document.getElementById('spinner');\n  if (show) {\n    spinner.style.display = 'block';\n  } else {\n    spinner.style.display = 'none';\n  }\n}\n\nfunction disableFormInputs(form, disable) {\n  var inputs = form.querySelectorAll('input, select, textarea, button');\n  inputs.forEach(function(input) {\n    input.disabled = disable;\n  });\n}\n"],"names":[],"version":3,"file":"form.426f2268.js.map","sourceRoot":"/__parcel_source_root/"}