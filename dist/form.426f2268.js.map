{"mappings":"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","sources":["assets/js/form.js"],"sourcesContent":["GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxn2onZqiyTpulQTJsjSWgXDTJYN0bd9vKz4vjiiyMqKWlzRwCgggrM2dC1RZ_miroZBQ/exec'\n// Global variable to store fetched people data\nvar peopleData = [];\n\n\ndocument.addEventListener('DOMContentLoaded', function () {\n\tfetch(GOOGLE_SCRIPT_URL)\n\t\t.then(response => response.json())\n\t\t.then(data => {\n\t\t\tconsole.log('Fetched Data:', data);\n\t\t\t// Store the fetched data\n\t\t\tpeopleData = data;\n\t\t\t// Sort the peopleData by firstName in Hebrew alphabetical order\n\t\t\tpeopleData.sort(function (a, b) {\n\t\t\t\treturn a.firstName.localeCompare(b.firstName, 'he');\n\t\t\t});\n\t\t\t// Populate the spouse, mother, and father dropdowns\n\t\t\tpopulateSpouseDropdown(peopleData);\n\t\t\tpopulateMotherDropdown(peopleData);\n\t\t\tpopulateFatherDropdown(peopleData);\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error('Error fetching data:', error);\n\t\t});\n});\n\nfunction populateSpouseDropdown(people) {\n\tvar spouseSelect = document.getElementById('spouseSelect');\n\n\t// Clear existing options except the first one\n\tspouseSelect.options.length = 1;\n\n\tpeople.forEach(function (person, index) {\n\t\tvar option = document.createElement('option');\n\t\toption.value = index; // Use the index as the value\n\t\toption.text = `${person.firstName} ${person.lastName}`;\n\t\tspouseSelect.add(option);\n\t});\n}\n\nfunction populateMotherDropdown(people) {\n\tvar motherSelect = document.getElementById('motherSelect');\n\n\t// Clear existing options except the first one\n\tmotherSelect.options.length = 1;\n\n\tpeople.forEach(function (person, index) {\n\t\tvar option = document.createElement('option');\n\t\toption.value = index; // Use the index as the value\n\t\toption.text = `${person.firstName} ${person.lastName}`;\n\t\tmotherSelect.add(option);\n\t});\n}\n\nfunction populateFatherDropdown(people) {\n\tvar fatherSelect = document.getElementById('fatherSelect');\n\n\t// Clear existing options except the first one\n\tfatherSelect.options.length = 1;\n\n\tpeople.forEach(function (person, index) {\n\t\tvar option = document.createElement('option');\n\t\toption.value = index; // Use the index as the value\n\t\toption.text = `${person.firstName} ${person.lastName}`;\n\t\tfatherSelect.add(option);\n\t});\n}\n\n// Image preview functionality\ndocument.getElementById('faceImage').addEventListener('change', function (event) {\n\tvar reader = new FileReader();\n\treader.onload = function () {\n\t\tvar output = document.getElementById('thumbnail');\n\t\toutput.src = reader.result;\n\t\toutput.style.display = 'block';\n\t};\n\treader.readAsDataURL(event.target.files[0]);\n});\n\n// Conditional fields based on blood connection\ndocument.getElementById('bloodYes').addEventListener('change', toggleBloodFields);\ndocument.getElementById('bloodNo').addEventListener('change', toggleBloodFields);\n\nfunction toggleBloodFields() {\n\tvar bloodYesFields = document.getElementById('bloodYesFields');\n\tvar bloodNoFields = document.getElementById('bloodNoFields');\n\tvar isBloodYes = document.getElementById('bloodYes').checked;\n\n\tif (isBloodYes) {\n\t\tbloodYesFields.style.display = 'block';\n\t\tbloodNoFields.style.display = 'none';\n\t\t// Set required attributes\n\t\tdocument.getElementById('motherSelect').setAttribute('required', 'required');\n\t\tdocument.getElementById('fatherSelect').setAttribute('required', 'required');\n\t\tdocument.getElementById('spouseSelect').removeAttribute('required');\n\t} else {\n\t\tbloodYesFields.style.display = 'none';\n\t\tbloodNoFields.style.display = 'block';\n\t\t// Set required attributes\n\t\tdocument.getElementById('spouseSelect').setAttribute('required', 'required');\n\t\tdocument.getElementById('motherSelect').removeAttribute('required');\n\t\tdocument.getElementById('fatherSelect').removeAttribute('required');\n\t}\n}\n\n// Form submission handling\ndocument.getElementById('familyForm').addEventListener('submit', function (e) {\n\te.preventDefault();\n\n\tvar form = e.target;\n\n\t// Collect data before disabling inputs\n\tvar formData = new FormData(form);\n\n\t// Convert formData to a plain object\n\tvar data = {};\n\tformData.forEach(function (value, key) {\n\t\tconsole.log(value);\n\t\ttry {\n\t\t\tdata[key] = value.trim();\n\n\t\t} catch (error) {\n\t\t\tdata[key] = value\n\t\t}\n\n\t});\n\n\t// Map bloodConnection value from English to Hebrew\n\tif (data.bloodConnection === 'Yes') {\n\t\tdata.bloodConnection = 'כן';\n\t} else if (data.bloodConnection === 'No') {\n\t\tdata.bloodConnection = 'לא';\n\t}\n\n\t// If bloodConnection is 'לא' (No), handle spouse selection\n\tif (data.bloodConnection === 'לא' && data.spouseSelect) {\n\t\tvar spouseIndex = data.spouseSelect;\n\t\tvar spousePerson = peopleData[spouseIndex];\n\n\t\tif (spousePerson) {\n\t\t\tdata.spouseFirstName = spousePerson.firstName;\n\t\t\tdata.spouseLastName = spousePerson.lastName;\n\t\t} else {\n\t\t\tdata.spouseFirstName = '';\n\t\t\tdata.spouseLastName = '';\n\t\t}\n\t}\n\n\t// Remove spouseSelect from data since we now have spouseFirstName and spouseLastName\n\tdelete data.spouseSelect;\n\n\t// If bloodConnection is 'כן' (Yes), handle mother and father selection\n\tif (data.bloodConnection === 'כן') {\n\t\t// Mother\n\t\tif (data.motherSelect) {\n\t\t\tvar motherIndex = data.motherSelect;\n\t\t\tvar motherPerson = peopleData[motherIndex];\n\n\t\t\tif (motherPerson) {\n\t\t\t\tdata.motherFirstName = motherPerson.firstName;\n\t\t\t} else {\n\t\t\t\tdata.motherFirstName = '';\n\t\t\t}\n\t\t}\n\n\t\t// Father\n\t\tif (data.fatherSelect) {\n\t\t\tvar fatherIndex = data.fatherSelect;\n\t\t\tvar fatherPerson = peopleData[fatherIndex];\n\n\t\t\tif (fatherPerson) {\n\t\t\t\tdata.fatherFirstName = fatherPerson.firstName;\n\t\t\t} else {\n\t\t\t\tdata.fatherFirstName = '';\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove motherSelect and fatherSelect from data since we now have motherFirstName and fatherFirstName\n\tdelete data.motherSelect;\n\tdelete data.fatherSelect;\n\n\t// Existing code to handle image and send data...\n\n\tvar fileInput = document.getElementById('faceImage');\n\tvar file = fileInput.files[0];\n\n\tif (file) {\n\t\tvar reader = new FileReader();\n\t\treader.onloadend = function () {\n\t\t\t// Remove data URL prefix to get only base64 string\n\t\t\tvar base64String = reader.result.split(',')[1];\n\t\t\tdata.faceImage = base64String;\n\t\t\tdata.faceImageContentType = file.type;\n\n\t\t\t// Send data via fetch\n\t\t\tsendData(data, form);\n\t\t};\n\t\treader.readAsDataURL(file);\n\t} else {\n\t\t// No image selected\n\t\tdata.faceImage = null;\n\t\tdata.faceImageContentType = null;\n\n\t\t// Send data via fetch\n\t\tsendData(data, form);\n\t}\n});\n\nfunction sendData(data, form) {\n\tvar submitButton = form.querySelector('button[type=\"submit\"]');\n\n\t// Disable the submit button and form inputs\n\tsubmitButton.disabled = true;\n\tdisableFormInputs(form, true);\n\n\t// Show the spinner\n\tshowSpinner(true);\n\n\tfetch(GOOGLE_SCRIPT_URL, {\n\t\tredirect: \"follow\",\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(data),\n\t\theaders: {\n\t\t\t\"Content-Type\": \"text/plain;charset=utf-8\",\n\t\t},\n\t})\n\t\t.then(response => response.json())\n\t\t.then(result => {\n\t\t\t// Hide the spinner\n\t\t\tshowSpinner(false);\n\n\t\t\tif (result.status === 'success') {\n\t\t\t\t// Redirect to the success page\n\t\t\t\twindow.location.href = 'success.html';\n\t\t\t} else {\n\t\t\t\t// Enable the submit button and form inputs\n\t\t\t\tsubmitButton.disabled = false;\n\t\t\t\tdisableFormInputs(form, false);\n\t\t\t\tshowError('שגיאה: ' + result.message);\n\t\t\t}\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error('Error:', error);\n\t\t\t// Hide the spinner\n\t\t\tshowSpinner(false);\n\t\t\t// Enable the submit button and form inputs\n\t\t\tsubmitButton.disabled = false;\n\t\t\tdisableFormInputs(form, false);\n\t\t\tshowError('אירעה שגיאה בשליחת הנתונים.');\n\t\t});\n}\n\nfunction showError(message) {\n\tvar form = document.getElementById('familyForm');\n\tvar errorDiv = document.getElementById('errorDiv');\n\tif (!errorDiv) {\n\t\terrorDiv = document.createElement('div');\n\t\terrorDiv.id = 'errorDiv';\n\t\terrorDiv.className = 'alert alert-danger text-center';\n\t\tform.insertBefore(errorDiv, form.firstChild);\n\t}\n\terrorDiv.innerText = message;\n}\n\nfunction showSpinner(show) {\n\tvar spinner = document.getElementById('spinner');\n\tif (show) {\n\t\tspinner.style.display = 'block';\n\t} else {\n\t\tspinner.style.display = 'none';\n\t}\n}\n\nfunction disableFormInputs(form, disable) {\n\tvar inputs = form.querySelectorAll('input, select, textarea, button');\n\tinputs.forEach(function (input) {\n\t\tinput.disabled = disable;\n\t});\n}\n"],"names":[],"version":3,"file":"form.426f2268.js.map","sourceRoot":"/__parcel_source_root/"}