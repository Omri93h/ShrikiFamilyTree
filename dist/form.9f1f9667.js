GOOGLE_SCRIPT_URL="https://script.google.com/macros/s/AKfycbxn2onZqiyTpulQTJsjSWgXDTJYN0bd9vKz4vjiiyMqKWlzRwCgggrM2dC1RZ_miroZBQ/exec";var e=[];function t(){var e=document.getElementById("bloodYesFields"),t=document.getElementById("bloodNoFields");document.getElementById("bloodYes").checked?(e.style.display="block",t.style.display="none",document.getElementById("motherSelect").setAttribute("required","required"),document.getElementById("fatherSelect").setAttribute("required","required"),document.getElementById("spouseSelect").removeAttribute("required")):(e.style.display="none",t.style.display="block",document.getElementById("spouseSelect").setAttribute("required","required"),document.getElementById("motherSelect").removeAttribute("required"),document.getElementById("fatherSelect").removeAttribute("required"))}function n(e,t){var n=t.querySelector('button[type="submit"]');n.disabled=!0,a(t,!0),r(!0),fetch(GOOGLE_SCRIPT_URL,{redirect:"follow",method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"text/plain;charset=utf-8"}}).then(e=>e.json()).then(e=>{r(!1),"success"===e.status?window.location.href="success.html":(n.disabled=!1,a(t,!1),o("שגיאה: "+e.message))}).catch(e=>{console.error("Error:",e),r(!1),n.disabled=!1,a(t,!1),o("אירעה שגיאה בשליחת הנתונים.")})}function o(e){var t=document.getElementById("familyForm"),n=document.getElementById("errorDiv");n||((n=document.createElement("div")).id="errorDiv",n.className="alert alert-danger text-center",t.insertBefore(n,t.firstChild)),n.innerText=e}function r(e){var t=document.getElementById("spinner");e?t.style.display="block":t.style.display="none"}function a(e,t){e.querySelectorAll("input, select, textarea, button").forEach(function(e){e.disabled=t})}document.addEventListener("DOMContentLoaded",function(){fetch(GOOGLE_SCRIPT_URL).then(e=>e.json()).then(t=>{var n,o,r,a,l,d;console.log("Fetched Data:",t),n=e=t,(o=document.getElementById("spouseSelect")).options.length=1,n.forEach(function(e,t){var n=document.createElement("option");n.value=t,n.text=`${e.firstName} ${e.lastName}`,o.add(n)}),r=e,(a=document.getElementById("motherSelect")).options.length=1,r.forEach(function(e,t){var n=document.createElement("option");n.value=t,n.text=`${e.firstName} ${e.lastName}`,a.add(n)}),l=e,(d=document.getElementById("fatherSelect")).options.length=1,l.forEach(function(e,t){var n=document.createElement("option");n.value=t,n.text=`${e.firstName} ${e.lastName}`,d.add(n)})}).catch(e=>{console.error("Error fetching data:",e)})}),document.getElementById("faceImage").addEventListener("change",function(e){var t=new FileReader;t.onload=function(){var e=document.getElementById("thumbnail");e.src=t.result,e.style.display="block"},t.readAsDataURL(e.target.files[0])}),document.getElementById("bloodYes").addEventListener("change",t),document.getElementById("bloodNo").addEventListener("change",t),document.getElementById("familyForm").addEventListener("submit",function(t){t.preventDefault();var o=t.target,r=new FormData(o),a={};if(r.forEach(function(e,t){a[t]=e}),"Yes"===a.bloodConnection?a.bloodConnection="כן":"No"===a.bloodConnection&&(a.bloodConnection="לא"),"לא"===a.bloodConnection&&a.spouseSelect){var l=e[a.spouseSelect];l?(a.spouseFirstName=l.firstName,a.spouseLastName=l.lastName):(a.spouseFirstName="",a.spouseLastName="")}if(delete a.spouseSelect,"כן"===a.bloodConnection){if(a.motherSelect){var d=e[a.motherSelect];d?a.motherFirstName=d.firstName:a.motherFirstName=""}if(a.fatherSelect){var c=e[a.fatherSelect];c?a.fatherFirstName=c.firstName:a.fatherFirstName=""}}delete a.motherSelect,delete a.fatherSelect;var s=document.getElementById("faceImage").files[0];if(s){var i=new FileReader;i.onloadend=function(){var e=i.result.split(",")[1];a.faceImage=e,a.faceImageContentType=s.type,n(a,o)},i.readAsDataURL(s)}else a.faceImage=null,a.faceImageContentType=null,n(a,o)});
//# sourceMappingURL=form.9f1f9667.js.map
